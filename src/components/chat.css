:root{
    --assistant-bg:#e8f0ff;
    --assistant-border:#cfdcff;
    --user-bg:#fff4e8;
    --user-border:#f0d9c2;
    --system-bg:#FCFDFA;
    --ink:#111827;
  }
  
  * { box-sizing: border-box; }
  pre { margin: 0; font-family: inherit; white-space: pre-wrap; word-break: break-word; }
  
  .chat-wrap{
    display:flex; flex-direction:column;
    background:#FCFDFA;
    min-height: 100vh;
    /* ğŸ”¥ ì¶”ê°€: ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ë„ë¡ ë†’ì´ ì œí•œ */
    max-height: 100vh;
    overflow: hidden;
  }
  
  /* ----- header */
  .chat-header{
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 18px; border-bottom:1px solid #e5e7eb; background:#ffffff;
  }
  .chat-header .title{ font-weight:700; font-size:18px; }
  .chat-header .step{ color:#FCFDFA; }
  .chat-header .reset-btn{ border:1px solid #FCFDFA; background:#fff; padding:6px 10px; border-radius:8px; }
  
  /* ----- body */
  .chat-body{
    flex:1; 
    overflow-y:auto; /* ğŸ”¥ ì´ë¯¸ ìˆì§€ë§Œ í™•ì¸ */
    margin-top: 70px;
    background: #F2EEED;
    /* ğŸ”¥ ì¶”ê°€: ìŠ¤í¬ë¡¤ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ë„ë¡ */
    padding: 16px;
  }
  
  /* ğŸ”¥ ë¬¸ì œ: position: absoluteê°€ ìŠ¤í¬ë¡¤ ì˜ì—­ì„ ë²—ì–´ë‚¨ */
  .chat-wrap::before {
    content: "";
    position: fixed; /* ğŸ”¥ ìˆ˜ì •: absolute â†’ fixed */
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    background: #FCFDFA; 
    z-index: 0;
  }
  
  .bubble-row{ display:flex; margin:10px 0; }
  .bubble-row.left{ justify-content:flex-start; }
  .bubble-row.right{ justify-content:flex-end; }
  
  .bubble{
    position:relative; max-width:72%;
    padding:14px 16px; border-radius:14px;
    border:1px solid transparent; color:var(--ink);
    box-shadow: 0 1px 1px rgba(0,0,0,0.06);
  }
  .bubble.system{
    background: var(--system-bg);
    border-color:#FCFDFA; color:#374151;
  }
  .bubble.assistant{
    background: var(--assistant-bg);
    border-color: var(--assistant-border);
  }
  .bubble.user{
    background: var(--user-bg);
    border-color: var(--user-border);
  }
  
  /* ê¼¬ë¦¬ - assistant(ì™¼ìª½) */
  .bubble.assistant::after{
    content:""; position:absolute; left:-6px; bottom:12px;
    width:12px; height:12px; background:var(--assistant-bg);
    border-left:1px solid var(--assistant-border);
    border-bottom:1px solid var(--assistant-border);
    transform:rotate(45deg);
  }
  /* ê¼¬ë¦¬ - user(ì˜¤ë¥¸ìª½) */
  .bubble.user::after{
    content:""; position:absolute; right:-6px; bottom:12px;
    width:12px; height:12px; background:var(--user-bg);
    border-right:1px solid var(--user-border);
    border-bottom:1px solid var(--user-border);
    transform:rotate(45deg);
  }
  
  /* ë©”ì‹œì§€ í…ìŠ¤íŠ¸ */
  .bubble .msg{ line-height:1.6; font-size:16px; }
  
  /* "ë©”ì‹œì§€ ì…ë ¥ ì¤‘â€¦" ìŠ¤íƒ€ì¼(ì‚´ì§ ì—°í•œ ëŠë‚Œ) */
  .bubble.typing{ opacity:.85; }
  .bubble.typing .msg{ position:relative; padding-right:18px; }
  .bubble.typing .msg::after{
    content:""; position:absolute; right:0; top:6px; width:4px; height:4px; border-radius:50%;
    background:#9aa7c9; box-shadow: 8px 0 0 #9aa7c9, 16px 0 0 #9aa7c9;
    animation: blink 1.2s infinite ease-in-out;
  }
  @keyframes blink{
    0% { opacity:.3; }
    50% { opacity:1; }
    100% { opacity:.3; }
  }
  
  /* ----- input */
  .chat-input{
    position: sticky;
    bottom: 0; /* ğŸ”¥ ì¶”ê°€: í•˜ë‹¨ ê³ ì • */
    display:flex; gap:10px; padding:12px; border-top:1px solid #e5e7eb; background:#fff;
    z-index: 10; /* ğŸ”¥ ì¶”ê°€: ìŠ¤í¬ë¡¤ ì‹œ ìœ„ì— í‘œì‹œ */
  }
  .chat-input input{
    flex:1; padding:12px 14px; border:1px solid #e5e7eb; border-radius:12px; font-size:15px;
    outline:none;
  }
  .chat-input input:focus{ border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(99,102,241,.15); }
  .chat-input button{
    padding:0 16px; border:1px solid #e5e7eb; border-radius:12px; background:#111827; color:#fff; font-weight:600;
  }
  .chat-input button:disabled{ opacity:.5; cursor:not-allowed; }
  
  /* ì—ëŸ¬/ì»¨í…ìŠ¤íŠ¸ */
  .error{ color:#b91c1c; padding:8px 16px; }
  .context-view{ padding:8px 16px; background:#fff; border-top:1px solid #e5e7eb; }
  .next-btn-wrap {
    text-align: center;
    margin: 12px 0;
  }
  
  .next-btn {
    background: #4b7bec;
    color: #fff;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s;
  }
  
  .next-btn:hover {
    background: #3867d6;
  }
  .template-btn-container {
    display: flex;
    justify-content: center;
    margin: 10px 0 15px;
  }
  
  .template-btn {
    background-color: #BB4E2D;
    color: #fff;
    font-size: 15px;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  
  .template-btn:hover {
    background-color: #43a047;
  }